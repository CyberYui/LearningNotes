## Linux学习笔记

|  命令  |               额外选择                | 基本效果                                                     |
| :----: | :-----------------------------------: | :----------------------------------------------------------- |
|   ls   |             -s -a -l -lh              | 查看内容                                                     |
| touch  |   touch lover_{1..10}_shiyanlou.txt   | 创建内容(额外的这种命令模式会创建10个新文件)                 |
|  man   | -1 -某个命令 (1代表第一页,一般有六页) | 查询某个命令具体是干啥的                                     |
|  sudo  |                apt-get                | 这其实是用户组的命令,具体见下                                |
|   cd   |            .. . /<folder>             | 进入某个文件夹,和 windows 一样用,`.`（当前目录） `..`（上一级目录）,**Linux 下以 `.` 开头的文件为隐藏文件** |
|  who   |            [whoami] -a -d             | 查看当前的用户,也可以用 who am i 来代替,这样会显示详细一些,也可以用 who am i 来代替,这样会显示详细一些 |
|        |            [who mom likes]            | 和 who am i 一样                                             |
|  exit  |                                       | 退出终端                                                     |
| groups |                <user>                 | 查看 user 的所在组                                           |
|  cat   |                <files>                | 读取指定文件的内容并打印到终端输出                           |
|        |                                       |                                                              |

### 关于Linux的用户及文件权限管理

最大权限的账户是 root 账户

> root 权限,系统权限的一种,与 SYSTEM 权限可以理解成一个概念,但高于 Administrator 权限,root 是 Linux 和 UNIX 系统中的超级管理员用户帐户,该帐户拥有整个系统至高无上的权力,所有对象他都可以操作,所以很多黑客在入侵系统的时候,都要把权限提升到 root 权限,这个操作等同于在 Windows 下就是将新建的非法帐户添加到 Administrators 用户组。更比如安卓操作系统中（基于 Linux 内核）获得 root 权限之后就意味着已经获得了手机的最高权限,这时候你可以对手机中的任何文件（包括系统文件）执行所有增、删、改、查的操作。

### 关于 ls 命令的使用

> `ls -l`可以用较长的格式列出文件,其结果的各项内容如下:
>
> <img src="G://LinuxLearning//3-9.png" width="100%">
>
> 你可以给 ls 加上 `-lh` 参数来更直观的查看文件的大小
>
> 同时使用 `-a` 和 `-l` 参数这样即可 `ls -al`
>
> [PS]显示所有文件大小,并以普通人类能看懂的方式呈现:`ls -asSh`
>
> > 其中小 s 为显示文件大小,大 S 为按文件大小排序
>
> 

#### 关于权限和文件类型

| 权限标志 | 表示内容                                                     |
| :------: | ------------------------------------------------------------ |
|    r     | 表示允许读权限,表示你可以使用 `cat <file name>` 之类的命令来读取某个文件的内容 |
|    w     | 表示允许写权限,表示你可以编辑和修改某个文件的内容            |
|    x     | 表示允许执行权限                                             |

**一个目录同时具有读权限和执行权限才可以打开并查看内部文件,而一个目录要有写权限才允许在其中创建其它文件**

这是因为目录文件实际保存着该目录里面的文件的列表等信息

##### 修改文件权限

方式一 : 二进制数字表示

<img src="G://LinuxLearning//3-14.png" width="70%">

每个文件有三组固定的权限,分别对应拥有者,所属用户组,其他用户,**记住这个顺序是固定的**

例如我们刚刚新建的文件 iphone11 的权限是 `rw-rw-rw-`,换成对应的十进制表示就是 666,这就表示这个文件的拥有者,所属用户组和其他用户具有读写权限,不具有执行权限 ( 文件的读写执行对应字母 `rwx`,以二进制表示就是 `111`,用十进制表示就是 `7`)

方式二 : 加减赋值操作

使用以下代码完成对 iphone11 的权限修改 : `chmod go-rw iphone11`

> `g`、`o` 还有 `u` 分别表示 group（用户组）、others（其他用户） 和 user（用户），`+` 和 `-` 分别表示增加和去掉相应的权限

| 文件标志 | 表示内容 |
| :------: | -------- |
|    d     | 目录     |
|    l     | 软链接   |
|    b     | 块设备   |
|    c     | 字符设备 |
|    s     | socket   |
|    p     | 管道     |
|    -     | 普通文件 |

[PS]**Linux 里面一切皆文件**

##### 变更文件所有者

需要切换到 shiyanlou 用户执行以下操作 :

> `cd /home/lilei` 

> `ls iphone11` 

> `sudo chown shiyanlou iphone11`

### who 命令的其他常用参数

|  -a  | 打印能打印的全部           |
| :--: | -------------------------- |
|  -d  | 打印死掉的进程             |
|  -m  | 同`am i`,`mom likes`       |
|  -q  | 打印当前登录用户数及用户名 |
|  -u  | 打印当前登录用户登录信息   |
|  -r  | 打印运行等级               |

### su, su- 与 sudo

Linux 中,输入密码是不显示的,连*都不显示的

su <user> 可以切换到用户 user

> `su <user>` 可以切换到用户 user,执行时需要输入目标用户的密码

sudo adduser <user> 可以创建用户,要注意创建用户需要输入密码的

> [PS]`adduser` 和 `useradd` 的区别是什么 ?
>
> [A]`useradd` 只创建用户，不会创建用户密码和工作目录，创建完了需要使用 `passwd <username>` 去设置新用户的密码。`adduser` 在创建用户的同时，会创建工作目录和密码（提示你设置），做这一系列的操作。其实 `useradd`、`userdel` 这类操作更像是一种命令，执行完了就返回。而 `adduser` 更像是一种程序，需要你输入、确定等一系列操作

sudo passwd shiyanlou 给当前用户 shiyanlou 创建密码

> `sudo <cmd>` 可以以特权级别运行 cmd 命令,需要当前用户属于 sudo 组,且需要输入当前用户的密码

### 用户组

给一个用户添加用户组可以用以下命令:

> `sudo usermod -G sudo lilei`

但是要保证当前的用户是有给其他用户权限的能力的

删除一个用户可以用以下命令:

> `sudo deluser lilei --remove-home`

使用 `--remove-home` 参数在删除用户时候会一并将该用户的工作目录一并删除

删除用户组可以使用 `groupdel` 命令,倘若该群组中仍包括某些用户,则必须先删除这些用户后,才能删除群组

#### 方法1 : 使用 groups 命令

> ` sudo cat /etc/sudoers.d/shiyanlou `
>
> 这句话等于下面这些话
>
> `cd /etc/sudoers.d/`+`cat shiyanlou`

#### 方法2 : 查看 `/etc/group` 文件

> `cat /etc/group | sort`

##### 关于 /etc/group 文件

其内容包括用户组,用户组口令,GID (组ID) 以及 该用户组所包含的用户 (User) ,每个用户组的一条记录格式如下:

> group_name : password : GID : user_list

password 字段为一个 `x`,并不是说密码就是它,只是表示密码不可见而已

如果用户的 GID 等于用户组的 GID,那么最后一个字段 `user_list` 就是空的,这里的 GID 是指用户默认所在组的 GID,可以使用 `id` 命令查看

##### 关于 cat 命令

可以通过使用 grep 命令过滤掉不想看到的结果 ( grep 就是抓取想要的内容)

>  `cat /etc/group | grep -E "shiyanlou"`